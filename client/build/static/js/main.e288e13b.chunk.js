(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},295:function(e,t,a){},296:function(e,t,a){},301:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(36),l=a.n(r),c=(a(251),a.p,a(252),a(236)),o=a(41),s=(a(253),a(199)),d=a(64),u=a(52),p=a.n(u),f=a(82),h=a(19),v=a(200),m=a.n(v),j=a(14);function b(e){return Object(j.jsx)("ul",{className:"list-group",children:e.children})}function w(e){return Object(j.jsx)("li",{className:"list-group-item",children:e.children})}var x=a(338),O=a(341),g=a(345),R=a(343),D=a(348),C=a(344),k=a(347),y=Object(x.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function N(e){var t=y(),a=(t.bullet,Object(n.useState)(!e.title)),i=Object(h.a)(a,2),r=i[0],l=i[1],c=Object(n.useState)(e.title),o=Object(h.a)(c,2),s=o[0],d=o[1];return Object(j.jsxs)(O.a,{className:t.root,children:[Object(j.jsxs)(R.a,{children:[Object(j.jsxs)(C.a,{variant:"h5",component:"h2",children:[r?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k.a,{id:"outlined-basic",label:"Checklist Title",variant:"outlined",value:s,onChange:function(e){return d(e.currentTarget.value)}}),Object(j.jsx)(D.a,{variant:"contained",size:"small",onClick:function(t){e.saveChecklist(s),l(!1)},children:"Save Title"})]}):Object(j.jsxs)(j.Fragment,{children:[s,Object(j.jsx)(D.a,{variant:"contained",size:"small",onClick:function(e){return l(!0)},children:"Edit Title"})]}),Object(j.jsx)(D.a,{variant:"contained",size:"small",color:"secondary",style:{float:"right"},onClick:function(t){return e.deleteChecklist(e.id)},children:"Delete"})]}),Object(j.jsx)(C.a,{variant:"body2",component:"div",children:e.children})]}),Object(j.jsxs)(g.a,{children:[e.canContinue?Object(j.jsx)(D.a,{variant:"contained",size:"small",onClick:function(t){return e.continue(e.id)},children:"Continue Last"}):"",e.canFillOut?Object(j.jsx)(D.a,{variant:"contained",size:"small",onClick:function(t){return e.fillOut(e.id)},children:"Fill out"}):"",Object(j.jsx)(D.a,{variant:"contained",size:"small",onClick:function(t){return e.update(e.id)},children:"Update"})]})]})}var S=function(e,t){var a=i.a.useState((function(){var a=window.localStorage.getItem(t);return null!==a?JSON.parse(a):e})),n=Object(h.a)(a,2),r=n[0],l=n[1];return i.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(r))}),[t,r]),[r,l]},W=a(233),I=a.n(W),F=a(346),P={_id:"",title:"",phases:[]};function E(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],i=t[1],r=S([],"currentChecklist"),l=Object(h.a)(r,2),c=l[0],o=l[1];Object(n.useEffect)((function(){u()}),[]);var u=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/checklists");case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location="/checklist/".concat(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=a.filter((function(e){return e.id===t}))).length){e.next=3;break}return e.abrupt("return");case 3:(i=I.a.cloneDeep(n[0])).id="newChecklist",i.template=t,o([].concat(Object(d.a)(c),[i]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(a=c.filter((function(e){return e.template===t})))){e.next=3;break}return e.abrupt("return");case 3:window.location="/checklist/".concat(a[0].id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i([Object(s.a)({},P)].concat(Object(d.a)(a)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/checklists/",t);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("/api/checklists/"+t);case 2:e.sent,u();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F.a,{container:!0,children:Object(j.jsx)(F.a,{item:!0,children:Object(j.jsx)(D.a,{variant:"contained",size:"small",onClick:function(e){return g()},children:"New Checklist"})})}),Object(j.jsx)(b,{children:a.map((function(e){return Object(j.jsx)(w,{children:Object(j.jsx)(N,{title:e.title,fillOut:x,update:v,continue:O,deleteChecklist:C,canContinue:c.find((function(t){return t.template===e.id||t.template===e._id})),canFillOut:e.phases.length>0,id:e._id,saveChecklist:function(t){return R(Object(s.a)(Object(s.a)({},e),{},{title:t}))},children:Object(j.jsx)(b,{children:e.phases.map((function(e,t){if(!(t>2))return Object(j.jsx)(w,{children:e.title},"phase".concat(t))}))})},e._id)},e._id+"li")}))})]})}var H=function(e){return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)(E,{})})};var _=function(){return Object(j.jsxs)("nav",{className:"navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm bg-dark text-white",children:[Object(j.jsx)("div",{className:"icon-wrap align-right"}),Object(j.jsx)("a",{className:"navbar-brand text-white",href:"/",children:"Home"}),Object(j.jsx)("a",{className:"navbar-brand text-white",href:"/Login",children:"Login"})]})},J=a(197),M=(a(280),a(286),a(287),a(288),a(234)),G=a(237),T=a(239),Y=a(238),L=a(196),z=(a(293),a(294),a(295),a(204)),A=a(349),B=z.a.now().toFormat("MM/dd"),V={modules:[G.a,T.a,Y.a,L.a],columnDefs:[{field:"title",headerName:"Phases",cellRenderer:"agGroupCellRenderer"},{field:"order",headerName:"Line",hide:!0}],defaultColDef:{flex:1,editable:!0},popupParent:document.querySelector("body"),detailCellRendererParams:{detailGridOptions:{columnDefs:[{field:"finalReview",headerName:"Final Review",headerClass:"rotated-header",maxWidth:100},{field:"finalReviewDate",headerName:"Final Reviewed Date",headerClass:"rotated-header",maxWidth:100},{field:"review",headerName:"Review",headerClass:"rotated-header",maxWidth:100},{field:"reviewDate",headerName:"Reviewed Date",headerClass:"rotated-header",maxWidth:100},{field:"prepared",headerName:"Prepare",headerClass:"rotated-header",maxWidth:100},{field:"preparedDate",headerName:"Prepared Date",headerClass:"rotated-header",maxWidth:100},{field:"explanationRef",headerName:"Explanation Ref",headerClass:"rotated-header",maxWidth:200},{field:"templateRef",headerName:"Template Ref",headerClass:"rotated-header",maxWidth:200},{field:"mfiRef",headerName:"MFI #",maxWidth:200},{field:"line",headerName:"Line #",maxWidth:100,sortable:!0,rowDrag:!0},{field:"instruction",headerName:"Instructions / Detail",minWidth:300}],onGridReady:function(e){e.columnApi.applyColumnState({state:[{colId:"line",sort:"asc"}],defaultState:{sort:null}})},sortModel:[{field:"line",sort:"asc"}],defaultGroupSortComparator:function(e,t){return e.line-t.line},defaultColDef:{flex:1,editable:!0,resizable:!0},headerHeight:150,getRowNodeId:function(e){return e._id},getContextMenuItems:function(e){},onCellValueChanged:function(e){},stopEditingWhenGridLosesFocus:!0,animateRows:!0},getDetailRowData:function(e){e.successCallback(e.data.tasks)}},rowData:[{_id:0,title:"Phase 1",order:1,tasks:[{_id:1,finalReview:"WH",finalReviewDate:B,review:"JY",reviewDate:B,prepared:"WH",preparedDate:B,explanationRef:"01.01",templateRef:"02.01",mfiRef:"01",line:1,instruction:"Clean out the dog house"},{_id:2,finalReview:"",finalReviewDate:"",review:"JY",reviewDate:B,prepared:"WH",preparedDate:B,explanationRef:"01.01",templateRef:"02.01",mfiRef:"02",line:2,instruction:"Clean out the dog house"},{_id:3,finalReview:"",finalReviewDate:"",review:"JY",reviewDate:B,prepared:"WH",preparedDate:B,explanationRef:"01.01",templateRef:"02.01",mfiRef:"03",line:3,instruction:"Clean out the dog house"}]}]},q=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),i=a[0],r=a[1],l=Object(n.useRef)({}),c=Object(n.useRef)({}),o=Object(n.useRef)(!0);Object(n.useEffect)((function(){var e=V.rowData;e.forEach((function(e){e.tasks.forEach((function(t){return t.phaseId=e._id}))})),r(e)}),[]);var s=function(e){return[{name:"Insert",action:function(){var t=e.node.data,a=[];if(e.api.forEachNode((function(e){return a.push(e.data)})),console.log("phases",a),t.tasks){var n=[d(t.order+1)],l=a.filter((function(e){return e.order>t.order}));l.forEach((function(e){return e.order++})),r(a.concat(n)),e.api.applyTransaction({add:n,update:l}),e.columnApi.applyColumnState({state:[{colId:"order",sort:"asc"}],defaultState:{sort:null}})}else{var c=i.find((function(e){return e._id===t.phaseId})),o=u(t.phaseId,t.line+1);o.phaseId=c._id;var s=[o],p=c.tasks.filter((function(e){return e.line>t.line}));p.forEach((function(e){return e.line++})),c.tasks=c.tasks.concat(s),e.api.applyTransaction({add:s,update:p}),e.columnApi.applyColumnState({state:[{colId:"line",sort:"asc"}],defaultState:{sort:null}})}},cssClasses:["redFont","bold"]}]},d=function(e){var t=Object(A.a)();return{title:"<Hit enter to enter the title of this phase>",tasks:[u(t,1)],order:e,_id:t}},u=function(e,t,a){z.a.now().toFormat("MM/dd");return{finalReview:"",finalReviewDate:"",review:"",reviewDate:"",prepared:"",preparedDate:"",explanationRef:"",templateRef:"",mfiRef:"",line:t,phaseId:e,_id:Object(A.a)(),instruction:a||"<Double click or hit enter to enter task instruction / details>"}};return V.detailCellRendererParams.detailGridOptions.getContextMenuItems=s,V.detailCellRendererParams.detailGridOptions.onRowDragMove=function(e){var t=[];e.api.forEachNode((function(e){return t.push(e)}));var a=e.node,n=e.overNode,i=a!==n;if(console.log("event on row drag move",e),i){var l=a.data,c=n.data,o=t.indexOf(l),s=t.indexOf(c),d=t.slice();!function(e,t,a){var n=e[t];e.splice(t,1),e.splice(a,0,n)}(d,o,s),r(d),e.api.setRowData(d),e.api.clearFocusedCell()}},V.detailCellRendererParams.detailGridOptions.onSortChanged=function(){var e=l.current.getSortModel();o.current=e&&e.length>0;var t=o;console.log("sortActive = "+o+", allowRowDrag = "+t),l.current.setSuppressRowDrag(t)},V.detailCellRendererParams.detailGridOptions.onCellValueChanged=function(e){if(console.log("cell value changed",e),"line"===e.colDef.field){var t=e.value,a=e.oldValue,n=[];e.api.forEachNode((function(e){return n.push(e.data)})),t>a?(t>n.length&&(t=n.length),n.forEach((function(e){e.line>a&&e.line<=t&&e.line--}))):a>t&&(t<1&&(t=1),n.forEach((function(e){e.line<a&&e.line>=t&&e.line++})));var i=e.node.data;i.line=t,n.push(i),e.api.applyTransaction({update:n}),e.columnApi.applyColumnState({state:[{colId:"line",sort:"asc"}],defaultState:{sort:null}})}},Object(j.jsx)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:Object(j.jsx)("div",{id:"myGrid",style:{height:"100%",width:"100%"},className:"ag-theme-alpine",children:Object(j.jsx)(M.AgGridReact,{modules:V.modules,columnDefs:V.columnDefs,defaultColDef:V.defaultColDef,masterDetail:!0,stopEditingWhenGridLosesFocus:!0,sortModel:[{field:"order",sort:"asc"}],getRowNodeId:function(e){return e._id},popupParent:V.popupParent,detailCellRendererParams:V.detailCellRendererParams,getContextMenuItems:s,onGridReady:function(e){l.current=e.api,e.columnApi.applyColumnState({state:[{colId:"order",sort:"asc"}],defaultState:{sort:null}}),c.current=e.columnApi},rowData:i})})})},U=function(e){var t=e.columnHeadings,a=void 0===t?[]:t,i=e.phases,r=void 0===i?[]:i;Object(n.useEffect)((function(){console.log("headings",a),console.log("phases",r)}),[]);return Object(j.jsx)(q,{})},K=a(235),Q=(a(296),[{label:"Final Reviewed By",value:"finalReview",style:{transform:"rotate(90deg)"}},{label:"Final Reviewed Date",value:"finalReviewDate",style:{transform:"rotate(90deg)"}},{label:"Reviewed By",value:"review",style:{transform:"rotate(90deg)"}},{label:"Reviewed Date",value:"reviewDate",style:{transform:"rotate(90deg)"}},{label:"Prepared By",value:"prepare",style:{transform:"rotate(90deg)"}},{label:"Prepared Date",value:"prepareDate",style:{transform:"rotate(90deg)"}},{label:"Explanation Ref",value:"explanation",style:{transform:"rotate(90deg)"}},{label:"Template Ref",value:"template",style:{transform:"rotate(90deg)"}},{label:"Line #",value:"line"},{label:"Instruction / Detail",value:"instruction",style:{minWidth:"600px"}}]),X=K.DateTime.now().toFormat("MM/dd"),Z={phases:[{title:"Phase 1",tasks:[{finalReview:"",finalReviewDate:"",review:"JY",reviewDate:X,prepared:"WH",preparedDate:X,explanation:"01.01",template:"02.01",line:1,instruction:"Clean out the dog house"},{finalReview:"",finalReviewDate:"",review:"JY",reviewDate:X,prepared:"WH",preparedDate:X,explanation:"01.02",template:"02.02",line:2,instruction:"Setup sleeping area(pillow blankets, etc."},{finalReview:"",finalReviewDate:"",review:"JY",reviewDate:X,prepared:"WH",preparedDate:X,explanation:"01.02",template:"02.02",line:2,instruction:"Sneak the bucket of ice cream out and hide it under your pillow"}]},{title:"Phase 2",tasks:[{finalReview:"",finalReviewDate:"",review:"JY",reviewDate:X,prepared:"WH",preparedDate:X,explanation:"01.01",template:"02.01",line:3,instruction:"Setup rain cover in case it rains"},{finalReview:"",finalReviewDate:"",review:"JY",reviewDate:X,prepared:"WH",preparedDate:X,explanation:"01.02",template:"02.02",line:4,instruction:"Prepare dinner (there's dog food somewhere)"}]},{title:"Phase 3",tasks:[{finalReview:"",finalReviewDate:"",review:"JY",reviewDate:X,prepared:"WH",preparedDate:X,explanation:"01.01",template:"02.01",line:5,instruction:"Go to sleep"},{finalReview:"",finalReviewDate:"",review:"JY",reviewDate:X,prepared:"WH",preparedDate:X,explanation:"01.02",template:"02.02",line:6,instruction:"Wake up"},{finalReview:"",finalReviewDate:"",review:"JY",reviewDate:X,prepared:"WH",preparedDate:X,explanation:"01.02",template:"02.02",line:6,instruction:"Bully Nate because you woke up on the wrong side of the lawn and it's his fault"}]}]},$=function(e){e.checklistId,Object(J.a)(e,["checklistId"]);return Object(n.useEffect)((function(){}),[]),Object(j.jsxs)("div",{style:{height:"100%"},children:[Object(j.jsx)("h2",{children:"Checklist"}),Object(j.jsx)(U,{columnHeadings:Q,phases:Z.phases})]})};var ee=function(){return Object(j.jsx)(c.a,{children:Object(j.jsxs)("div",{id:"app",children:[Object(j.jsx)(_,{}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/",children:Object(j.jsx)(H,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/checklist/:id",children:Object(j.jsx)($,{})}),Object(j.jsx)(o.a,{})]})})]})})},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,351)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),n(e),i(e),r(e),l(e)}))};a(300);l.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(ee,{})}),document.getElementById("root")),te()}},[[301,1,2]]]);
//# sourceMappingURL=main.e288e13b.chunk.js.map